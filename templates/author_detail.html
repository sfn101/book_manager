{% extends "base.html" %}

{% block title %}{{ author_name }} - Author{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-12 d-flex align-items-center gap-3">
            {% if author_image_url %}
            <img src="{{ author_image_url }}" alt="{{ author_name }}" style="width:80px;height:80px;border-radius:50%;object-fit:cover;" />
            {% endif %}
            <div>
                <h2 class="mb-1">{{ author_name }}</h2>
                {% if ol_author and (ol_author.birth_date or ol_author.death_date) %}
                <div class="text-muted">
                    {% if ol_author.birth_date %}Born: {{ ol_author.birth_date }}{% endif %}
                    {% if ol_author.death_date %} â€¢ Died: {{ ol_author.death_date }}{% endif %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <div class="row mb-4">
        <div class="col-12">
            <h4>Books in our library</h4>
        </div>
        {% if books %}
            {% for book in books %}
            <div class="col-sm-6 col-md-4 col-lg-3 mb-3">
                <a href="/book/{{ book.id }}" class="text-decoration-none">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-img-top d-flex justify-content-center align-items-center bg-light" style="height: 220px;">
                            {% if book.cover_id %}
                                <img src="https://covers.openlibrary.org/b/id/{{ book.cover_id }}-M.jpg" 
                                     alt="{{ book.title }}" 
                                     class="img-fluid" 
                                     style="max-height:200px; max-width: 140px; object-fit: cover;"
                                     onerror="this.src='{{ url_for('static', filename='images/default.png') }}'">
                            {% else %}
                                <img src="{{ url_for('static', filename='images/default.png') }}" 
                                     alt="{{ book.title }}" 
                                     class="img-fluid" 
                                     style="max-height:200px; max-width: 140px; object-fit: cover;">
                            {% endif %}
                        </div>
                        <div class="card-body">
                            <h6 class="card-title mb-1">{{ book.title }}</h6>
                            <small class="text-muted">
                                {% if book.publication_year %}<i class="fas fa-calendar"></i> {{ book.publication_year }}{% endif %}
                            </small>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12"><div class="alert alert-info">No books by this author in our database yet.</div></div>
        {% endif %}
    </div>
</div>
{% endblock %}


